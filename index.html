<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario de Atención</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="form-container">
    <!-- Encabezado con logo y título -->
    <div class="form-header">
      <h1>Ayúdanos a mejorar</h1>
      <img class="logoMh" src="./assets/LogoMh.png" alt="Logo Mil Herrajes">
    </div>

    <form id="opinion-form">
      <!-- Nombre -->
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="nombre" required>

      <!-- Selección Agencia -->
      <label for="agencia">Seleccione la agencia que lo atendió:</label>
      <select id="agencia" name="agencia" required>
        <option value="" disabled selected>Seleccione una opción</option>
        <option>Bucaramanga - Mil Herrajes</option>
        <option>Bucaramanga - Metroadornos</option>
        <option>Bucaramanga - Metroherrajes</option>
        <option>Bucaramanga - Casablanca</option>
        <option>Barranquilla - Mil Herrajes</option>
        <option>Valledupar - Centroadornos</option>
        <option>Sincelejo - Centroherrajes</option>
        <option>Bogota - Mil Herrajes - centro</option>
        <option>Bogota - Mil Herrajes - calle 18</option>
        <option>Bogota - Mil Herrajes - calle 16</option>
        <option>Bogota - Centroadornos</option>
        <option>Cucuta - Peleteria</option>
        <option>Cucuta - Cacharreria</option>
        <option>Cali - Mil Herrajes</option>
        <option>Cali Centroherrajes</option>
      </select>

      <!-- Calificación -->
      <label for="calificacion">¿Cómo calificas la atención?</label>
      <select id="calificacion" name="calificacion" required>
        <option value="" disabled selected>Seleccione una opción</option>
        <option>Excelente</option>
        <option>Buena</option>
        <option>Regular</option>
        <option>Mala</option>
        <option>Muy mala</option>
      </select>

      <!-- Comentario -->
      <label for="comentario">Déjanos tu comentario:</label>
      <textarea id="comentario" name="comentario" rows="4"></textarea>

      <!-- Botón -->
      <button type="submit">Enviar</button>
    </form>
  </div>

  <!-- Modal de "Enviando respuesta" -->
  <div id="modal-enviando" class="modal-enviando" style="display:none;">
    <div class="modal-content">
      <p>Enviando respuesta...</p>
    </div>
  </div>

  <script>
    const form = document.getElementById("opinion-form");
    const modal = document.getElementById("modal-enviando");

    form.addEventListener("submit", async function(e) {
      e.preventDefault();
      modal.style.display = "flex"; // Mostrar modal

      const data = {
        nombre: document.getElementById("nombre").value,
        agencia: document.getElementById("agencia").value,
        calificacion: document.getElementById("calificacion").value,
        comentario: document.getElementById("comentario").value
      };

      try {
        await fetch("https://script.google.com/macros/s/AKfycbwHiI7wMc0JjvA7FnuUcaNMVUMwOXoa5NOhZgjmWDKvPrijnoX4-oi5tYmMj0Sjun7u/exec", {
          method: "POST",
          mode: "no-cors",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        window.location.href = "gracias.html";
      } catch (error) {
        modal.style.display = "none"; // Ocultar modal si hay error
        alert("Hubo un error al enviar tus datos. Intenta de nuevo.");
      }
    });
  </script>
</body>
</html>